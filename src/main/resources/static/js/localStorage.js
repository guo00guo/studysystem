BizQQWPA.define("util.localStorage","util.cookie,lang.trim",function(require){var Cookie=require("util.cookie"),trim=require("lang.trim");var COOKIE_PREFIX="IELS";var EXPIRES=31536e8;var doc=document,commonPattern=new RegExp("(?:^|[ ;])"+COOKIE_PREFIX+"[^=]+=([^;$])"),keyPattern=function(key){return COOKIE_PREFIX+key},explore=function(callback){var attributes=doc.cookie.split(";"),i=0,length=attributes.length,items=[],match;if(callback){for(;i<length;i++){if(match=commonPattern.exec(attributes[i])){items.push(match[1]);callback(match[1])}}}else{for(;i<length;i++){(match=commonPattern.exec(attributes[i]))&&items.push(match[1])}}return items};return window.localStorage||{length:explore().length,key:function(index){return explore()[index]||null},getItem:function(key){return Cookie.get(keyPattern(key))},setItem:function(key,value){Cookie.set(keyPattern(key),value,null,"/",EXPIRES)},removeItem:function(key){Cookie.del(key)},clear:function(){explore(function(item){Cookie.del(trim(item.split("=")[0]))})}}});